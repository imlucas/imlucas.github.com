# Standalone Executables## Part 1: node.js apps---# GoalRun 1 command on any platform to get a single file that is ready to use with 0 prerequisites and 0 additional instructions.---# What is a standalone executable?- 1 file a user can just run *a.k.a*  - static binary  - standalone binary   - exe, bin^ This is an akward term that may not be familiar to most people.---# The löve Method1. Build `<runtime>.exe`2. Create `<app.zip>` of application and dependencies3. Append `<app.zip>` to `<runtime>.exe` to create `<app>.exe`4. `<app>.exe#main()` extracts `<app.zip>` to temp then executes it^ löve is framework you can use to make 2D games in Lua.^ First I'm aware of to solve problem of distributing dynamically typed applications as standalone executables.^ Learned about löve by looking at source of nw.js (predecessor of [electron][electron], formerly node-webkit).  Picked up hints of what to google and grep for against node.js source.^ Coincidentally, this is also how the project we use for Compass' Windows installer (Squirrel.Windows) works, concatenating a zip file onto the end of a prebuilt `Setup.exe`.---# `_third_party_main.js`^ node.js was meant to do this all along!^ BUT, no official documentation; just mailing list posts that say it exists :(---# Related Projects---# [nexe][nexe]**Pros** Active since 2012, does the job for simple apps**Cons** Filesystem hacks, no native addon support, no dynamic require statements^ [Browserify][browserify]-like approach---# [nar][nar]**Pros** It works, really amazing documentation!**Cons** Written in [LiveScript][LiveScript], focused more on distribution of archives^  [löve][löve] for node.js than *just* making standalone executables...---# [enclose][enclose]**Pros** Sweet landing page**Cons** No idea how it works as the code has 0 comments, doesn't work for me---# [lone][lone]- Feb. 2014: New project for MongoDB: `mongoscope`- Deliver as additional executable in `mongotools` tarball- "Yay! I'll write it in golang! Ugh..."- "I wish I could just use js..."^ "Ughs..." I found in using goalng to solve this problem: Young ecosystem led to lots of missing libraries, any collaborators would need to learn a new language, standalone binaries are a **feature** not a good reason to switch, `npm` is invaluable and no similar solution available at the time.---## example: eslint```bash#!/usr/bin/env bashgit clone git@github.com:eslint/eslint.git ~/eslintcd ~/eslint && npm installnpm install lone./node_modules/.bin/lone./.lone/.dist/eslint```^ Requirement: as simple as `go compile`.  No changes or caveats to your existing app.---## example: myapp/package.json```json{  "name": "myapp",  "version": "0.0.1",  "scripts": {    "test": "mocha",    "dist": "lone"  },  "bin": {"myapp": "bin/myapp.js"},  "config": {    "lone": {      "icon": "myapp.ico",      "ignore": ["test/**"]    }  },  "devDependencies": {    "lone": "^0.5.0",    "mocha": "^2.2.4"  }}```^ Requirement: dead simple integration for a project to start using lone.---# [lone][lone] put on ice- Intitial prototype worked suprisingly well!- But [electron][electron] was a better solution for `mongoscope` which became Compass---## Build [lone@1.0.0](https://github.com/mongodb-js/lone/milestones/1.0.0) Together- #19 [Signing](https://github.com/mongodb-js/lone/issues/19)- #20 [Distribution](https://github.com/mongodb-js/lone/issues/20)- #25 [Native addon support](https://github.com/mongodb-js/lone/issues/25)- #26 [Improve boot time](https://github.com/mongodb-js/lone/issues/26)- #28 [Oneliner](https://github.com/mongodb-js/lone/issues/28)- #29 [Make a pretty landing page](https://github.com/mongodb-js/lone/issues/29)^ So to get this project to what I feel is a respectable 1.0 release is a surprisingly short list of issues I'm hoping we can build together.  Some of these might seem quite scary, but if you view details on each issue you'll see they are all "known knowns".^ Signing: Because "install this random exe" just isn't good enough.^ Distribution: Should be dead simple for a project to start using lone **and** make it even easier to maintain it in future releases, e.g. simplify publishing binaries to GitHub Releases.^ Native addon support: Specifically, kerberos.  Unlike all other projects, actually know how to make this work for Windows :)^ Improve boot time: Currently doing a really dumb seek across entire binary on boot so it works but it's slow.^ Oneliner: Complimentary to Distribution but from the end-user perspective.  Backing HTTP service that can be deployed to heroku so end-users of apps using lone can paste a single line into their terminal and start using the app, see http://brew.sh/---# Next up:Part 2: Python appsPart 3: Python apps + node.js^ This is part 1 of a 3 part series on standalone executables.  Next we'll cover how python apps like `mtools` can be packaged and distributed as standalone executables.  And we'll finish up with a short piece on how python apps packaged as standalone executables can be leveraged from the node.js ecosystem and vice-versa.---# Questions?# [lucas@mongodb.com](mailto:lucas@mongodb.com)[lone]: https://github.com/mongodb-js/lone[lone-1.0]: https://github.com/mongodb-js/lone/milestones/1.0.0[Improve boot time]: https://github.com/mongodb-js/lone/issues/26[Native addon support]: https://github.com/mongodb-js/lone/issues/25[Distribution]: https://github.com/mongodb-js/lone/issues/20[Signing]: https://github.com/mongodb-js/lone/issues/19[Oneliner]: https://github.com/mongodb-js/lone/issues/28[browserify]: http://browserify.org[nuts]: https://github.com/GitbookIO/nuts[electron]: https://github.com/atom/electron[nw]: https://github.com/nwjs/nw.js[nexe]: https://github.com/jaredallard/nexe[LiveScript]: http://livescript.net/[nar]: https://github.com/h2non/nar[enclose]: https://github.com/igorklopov/enclose[löve]: https://love2d.org/[brooklynjs-talk]: http://imlucas.github.io/talks/brooklynjs_042014/static/